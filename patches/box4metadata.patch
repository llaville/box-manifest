diff --git a/src/Console/Command/Compile.php b/src/Console/Command/Compile.php
index 5836ff7..70a63d6 100644
--- a/src/Console/Command/Compile.php
+++ b/src/Console/Command/Compile.php
@@ -18,6 +18,7 @@ use Amp\MultiReasonException;
 use function array_map;
 use function array_search;
 use function array_shift;
+use function Composer\Autoload\includeFile;
 use function count;
 use function decoct;
 use function explode;
@@ -102,6 +103,7 @@ final class Compile implements CommandAware
     private const DEV_OPTION = 'dev';
     private const NO_CONFIG_OPTION = 'no-config';
     private const WITH_DOCKER_OPTION = 'with-docker';
+    private const BOOTSTRAP_OPTION = 'bootstrap';
 
     private const DEBUG_DIR = '.box_dump';
 
@@ -153,6 +155,12 @@ final class Compile implements CommandAware
                     InputOption::VALUE_NONE,
                     'Generates a Dockerfile',
                 ),
+                new InputOption(
+                    self::BOOTSTRAP_OPTION,
+                    null,
+                    InputOption::VALUE_REQUIRED,
+                    'A PHP script that is included before compile run',
+                ),
                 ConfigOption::getOptionInput(),
                 ChangeWorkingDirOption::getOptionInput(),
             ],
@@ -183,6 +191,14 @@ final class Compile implements CommandAware
 
         ChangeWorkingDirOption::changeWorkingDirectory($io);
 
+        if (!empty($bootstrap = $io->getOption(self::BOOTSTRAP_OPTION)->asNullableString()) && file_exists($bootstrap)) {
+            $io->writeln(
+                sprintf('<info>[debug] Bootstrapped file "%s"</info>', $bootstrap),
+                OutputInterface::VERBOSITY_DEBUG,
+            );
+            includeFile($bootstrap);
+        }
+
         $io->writeln($this->header);
 
         $config = $io->getOption(self::NO_CONFIG_OPTION)->asBoolean()
@@ -564,7 +580,15 @@ final class Compile implements CommandAware
             );
 
             if (is_callable($metadata)) {
-                $metadata = $metadata();
+                $logger->log(
+                    CompilerLogger::MINUS_PREFIX,
+                    'Using composer.json : ' . $config->getComposerJson()
+                );
+                $logger->log(
+                    CompilerLogger::MINUS_PREFIX,
+                    'Using composer.lock : ' . $config->getComposerLock()
+                );
+                $metadata = $metadata($config, $box);
             }
 
             $logger->log(
