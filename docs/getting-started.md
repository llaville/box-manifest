<!-- markdownlint-disable MD013 MD028 -->
# Getting Started

## Requirements

* PHP 8.2 or greater
* ext-phar
* PHPUnit 10 or greater (if you want to run unit tests)

## Docker

> v4.x docker images provided run in rootless mode, so you don't have to specify `-u $(id -u ${USER}):$(id -g ${USER})` options.

> Please mount the code directory to `/app` in the container.

Usage examples :

```shell
docker run --rm -it -v $(pwd):/app -w /app ghcr.io/llaville/box-manifest:v4 build -c box.json --output-file=sbom.xml
docker run --rm -it -v $(pwd):/app -w /app ghcr.io/llaville/box-manifest:v4 build -c box.json --output-file=manifest.txt
docker run --rm -it -v $(pwd):/app -w /app ghcr.io/llaville/box-manifest:v4 build -c box.json --output-file=console.txt

docker run --rm -it -v $(pwd):/app -w /app ghcr.io/llaville/box-manifest:v4 stub -c box.json --output-file=stub.php
```

## Usage

```text

    ____                __  ___            _ ____          __
   / __ )____  _  __   /  |/  /___ _____  (_) __/__  _____/ /_
  / __  / __ \| |/_/  / /|_/ / __ `/ __ \/ / /_/ _ \/ ___/ __/
 / /_/ / /_/ />  <   / /  / / /_/ / / / / / __/  __(__  ) /_
/_____/\____/_/|_|  /_/  /_/\__,_/_/ /_/_/_/  \___/____/\__/

BOX Manifest 4.0.0

Usage:
  command [options] [arguments]

Options:
  -h, --help            Display help for the given command. When no command is given display help for the list command
  -q, --quiet           Do not output any message
  -V, --version         Display this application version
      --ansi|--no-ansi  Force (or disable --no-ansi) ANSI output
  -n, --no-interaction  Do not ask any interactive question
  -v|vv|vvv, --verbose  Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug

Available commands:
  build       [manifest:build] Creates a manifest of your software components and dependencies.
  completion  Dump the shell completion script
  help        Display help for a command
  list        List commands
  stub        [manifest:stub] Generates a stub for your manifest application.
```

This Symfony Console application combines two native commands.

### Symfony `build` command

To build your application's manifest file(s).

```text
Description:
  Creates a manifest of your software components and dependencies.

Usage:
  build [options]
  manifest:build

Options:
      --no-config                    Ignore the config file even when one is specified with the --config option
  -c, --config=CONFIG                The alternative configuration file path.
  -b, --bootstrap=BOOTSTRAP          A PHP script that is included before execution
  -f, --output-format=OUTPUT-FORMAT  Format of the output: auto, plain, ansi, console, sbom-xml, sbom-json [default: "auto"]
  -s, --sbom-spec=SBOM-SPEC          SBOM specification version: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6 [default: "1.6"]
  -o, --output-file=OUTPUT-FILE      Write results to file (default to standard output)
  -h, --help                         Display help for the given command. When no command is given display help for the list command
  -q, --quiet                        Do not output any message
  -V, --version                      Display this application version
      --ansi|--no-ansi               Force (or disable --no-ansi) ANSI output
  -n, --no-interaction               Do not ask any interactive question
  -v|vv|vvv, --verbose               Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug

Help:
  The build command will generate a manifest of your application.
```

The `--output-file` and `--output-format` options can be used to control the formatting and destination
of the artifacts generated by `box-manifest`.
The default is to report to the console standard output but can be stored in a file (specified using `--output-file` option).
The format of the output can be changed using the `--output-format` option which may be useful if the output is to be used
as an input by another tool like `box`.

The `--config` option can be used to specify path to alternate version of a `box.json.dist` or `box.json`
that are not found in current working directory.

The `--no-config` option must be specified if you don't want to use BOX default configuration files (`box.json.dist` or `box.json`)

Once generated with the `--output-file` option, the manifest may be included as any other files you want to add into your PHP Archive.

### Symfony `stub` command

To build the stub that will support `--manifest` option, to display its contents at runtime.

```text
Description:
  Generates a stub for your manifest application.

Usage:
  stub [options]
  manifest:stub

Options:
      --no-config                Ignore the config file even when one is specified with the --config option
  -c, --config=CONFIG            The alternative configuration file path.
  -t, --template=TEMPLATE        PHP template file to customize the stub
  -r, --resource=RESOURCE        File(s) generated by the box-manifest binary command (multiple values allowed)
  -o, --output-file=OUTPUT-FILE  Write results to file (default to standard output)
  -h, --help                     Display help for the given command. When no command is given display help for the list command
  -q, --quiet                    Do not output any message
  -V, --version                  Display this application version
      --ansi|--no-ansi           Force (or disable --no-ansi) ANSI output
  -n, --no-interaction           Do not ask any interactive question
  -v|vv|vvv, --verbose           Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug

Help:
  The stub command will generate a stub of your manifest application.
```

The `--output-file` option can be used to control the destination of the output generated by `box-stub`.
The default is to report to the console standard output but can be stored in a file

The `--config` option can be used to specify path to alternate version of a `box.json.dist` or `box.json`
that are not found in current working directory.

The `--no-config` option must be specified if you don't want to use BOX default configuration files (`box.json.dist` or `box.json`)
